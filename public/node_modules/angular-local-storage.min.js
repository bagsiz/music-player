!function(e){var t={};function o(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=t,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=50)}({50:function(e,t,o){e.exports=o(51)},51:function(e,t){var o,r,n,i,a,c,s,u,l;window,o=window.angular,r=o.isDefined,n=o.isUndefined,i=o.isNumber,a=o.isObject,c=o.isArray,s=o.isString,u=o.extend,l=o.toJson,o.module("LocalStorageModule",[]).provider("localStorageService",function(){this.prefix="ls",this.storageType="localStorage",this.cookie={expiry:30,path:"/",secure:!1},this.defaultToCookie=!0,this.notify={setItem:!0,removeItem:!1},this.setPrefix=function(e){return this.prefix=e,this},this.setStorageType=function(e){return this.storageType=e,this},this.setDefaultToCookie=function(e){return this.defaultToCookie=!!e,this},this.setStorageCookie=function(e,t,o){return this.cookie.expiry=e,this.cookie.path=t,this.cookie.secure=o,this},this.setStorageCookieDomain=function(e){return this.cookie.domain=e,this},this.setNotify=function(e,t){return this.notify={setItem:e,removeItem:t},this},this.$get=["$rootScope","$window","$document","$parse","$timeout",function(e,t,o,f,g){function d(o){if(o||(o=t.event),v.setItem&&s(o.key)&&O(o.key)){var r=k(o.key);g(function(){e.$broadcast("LocalStorageModule.notification.changed",{key:r,newvalue:o.newValue,storageType:y.storageType})})}}var h,y=this,p=y.prefix,m=y.cookie,v=y.notify,T=y.storageType;o?o[0]&&(o=o[0]):o=document,"."!==p.substr(-1)&&(p=p?p+".":"");var S=function(e){return p+e},k=function(e){return e.replace(new RegExp("^"+p,"g"),"")},O=function(e){return 0===e.indexOf(p)},b=function(){try{var o=T in t&&null!==t[T],r=S("__"+Math.round(1e7*Math.random()));return o&&((h=t[T]).setItem(r,""),h.removeItem(r)),o}catch(t){return y.defaultToCookie&&(T="cookie"),e.$broadcast("LocalStorageModule.notification.error",t.message),!1}},L=b(),$=function(t,o,r){var i=I();try{if(P(r),o=n(o)?null:l(o),!L&&y.defaultToCookie||"cookie"===y.storageType)return L||e.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),v.setItem&&e.$broadcast("LocalStorageModule.notification.setitem",{key:t,newvalue:o,storageType:"cookie"}),w(t,o);try{h&&h.setItem(S(t),o),v.setItem&&e.$broadcast("LocalStorageModule.notification.setitem",{key:t,newvalue:o,storageType:y.storageType})}catch(r){return e.$broadcast("LocalStorageModule.notification.error",r.message),w(t,o)}return!0}finally{P(i)}},x=function(t,o){var r=I();try{if(P(o),!L&&y.defaultToCookie||"cookie"===y.storageType)return L||e.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),_(t);var n=h?h.getItem(S(t)):null;if(!n||"null"===n)return null;try{return JSON.parse(n)}catch(e){return n}}finally{P(r)}},E=function(){var t=I();try{var o,r,n=0;for(arguments.length>=1&&("localStorage"===arguments[arguments.length-1]||"sessionStorage"===arguments[arguments.length-1])&&(n=1,P(arguments[arguments.length-1])),o=0;o<arguments.length-n;o++)if(r=arguments[o],!L&&y.defaultToCookie||"cookie"===y.storageType)L||e.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),v.removeItem&&e.$broadcast("LocalStorageModule.notification.removeitem",{key:r,storageType:"cookie"}),C(r);else try{h.removeItem(S(r)),v.removeItem&&e.$broadcast("LocalStorageModule.notification.removeitem",{key:r,storageType:y.storageType})}catch(t){e.$broadcast("LocalStorageModule.notification.error",t.message),C(r)}}finally{P(t)}},M=function(){try{return t.navigator.cookieEnabled||"cookie"in o&&(o.cookie.length>0||(o.cookie="test").indexOf.call(o.cookie,"test")>-1)}catch(t){return e.$broadcast("LocalStorageModule.notification.error",t.message),!1}}(),w=function(t,r,s,u){if(n(r))return!1;if((c(r)||a(r))&&(r=l(r)),!M)return e.$broadcast("LocalStorageModule.notification.error","COOKIES_NOT_SUPPORTED"),!1;try{var f="",g=new Date,d="";if(null===r?(g.setTime(g.getTime()+-864e5),f="; expires="+g.toGMTString(),r=""):i(s)&&0!==s?(g.setTime(g.getTime()+24*s*60*60*1e3),f="; expires="+g.toGMTString()):0!==m.expiry&&(g.setTime(g.getTime()+24*m.expiry*60*60*1e3),f="; expires="+g.toGMTString()),t){var h="; path="+m.path;m.domain&&(d="; domain="+m.domain),"boolean"==typeof u?!0===u&&(d+="; secure"):!0===m.secure&&(d+="; secure"),o.cookie=S(t)+"="+encodeURIComponent(r)+f+h+d}}catch(t){return e.$broadcast("LocalStorageModule.notification.error",t.message),!1}return!0},_=function(t){if(!M)return e.$broadcast("LocalStorageModule.notification.error","COOKIES_NOT_SUPPORTED"),!1;for(var r=o.cookie&&o.cookie.split(";")||[],n=0;n<r.length;n++){for(var i=r[n];" "===i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(S(t)+"=")){var a=decodeURIComponent(i.substring(p.length+t.length+1,i.length));try{var c=JSON.parse(a);return"number"==typeof c?a:c}catch(e){return a}}}return null},C=function(e){w(e,null)},R=function(){for(var e=null,t=p.length,r=o.cookie.split(";"),n=0;n<r.length;n++){for(e=r[n];" "===e.charAt(0);)e=e.substring(1,e.length);var i=e.substring(t,e.indexOf("="));C(i)}},I=function(){return T},P=function(e){return e&&T!==e&&(T=e,L=b()),L};return L&&(t.addEventListener?(t.addEventListener("storage",d,!1),e.$on("$destroy",function(){t.removeEventListener("storage",d)})):t.attachEvent&&(t.attachEvent("onstorage",d),e.$on("$destroy",function(){t.detachEvent("onstorage",d)}))),{isSupported:L,getStorageType:I,setStorageType:P,setPrefix:function(e){p=e},set:$,add:$,get:x,keys:function(t){var o=I();try{if(P(t),!L)return e.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),[];var r=p.length,n=[];for(var i in h)if(i.substr(0,r)===p)try{n.push(i.substr(r))}catch(t){return e.$broadcast("LocalStorageModule.notification.error",t.Description),[]}return n}finally{P(o)}},remove:E,clearAll:function(t,o){var r=I();try{P(o);var n=p?new RegExp("^"+p):new RegExp,i=t?new RegExp(t):new RegExp;if(!L&&y.defaultToCookie||"cookie"===y.storageType)return L||e.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),R();if(!L&&!y.defaultToCookie)return!1;var a=p.length;for(var c in h)if(n.test(c)&&i.test(c.substr(a)))try{E(c.substr(a))}catch(t){return e.$broadcast("LocalStorageModule.notification.error",t.message),R()}return!0}finally{P(r)}},bind:function(e,t,o,n,i){var c=x(n=n||t,i);return null===c&&r(o)?c=o:a(c)&&a(o)&&(c=u(c,o)),f(t).assign(e,c),e.$watch(t,function(e){$(n,e,i)},a(e[t]))},deriveKey:S,underiveKey:k,length:function(e){var o=I();try{P(e);for(var r=0,n=t[T],i=0;i<n.length;i++)0===n.key(i).indexOf(p)&&r++;return r}finally{P(o)}},defaultToCookie:this.defaultToCookie,cookie:{isSupported:M,set:w,add:w,get:_,remove:C,clearAll:R}}}]})}});